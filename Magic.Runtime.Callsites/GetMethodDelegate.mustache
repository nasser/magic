// this file was generated by Magic.Runtime.Callsites -- do not edit it by hand!
using System.Reflection;

namespace Magic
{
    public static partial class DelegateHelpers
    {
        public static CallsiteFunc<object{{#subscripts}}, object{{/subscripts}}> GetMethodDelegate{{arityPadded}}(MethodBase method)
        {
            CallsiteFunc<object{{#subscripts}}, object{{/subscripts}}> ret;
            if(method.IsStatic)
                ret = ({{#subscripts}}arg{{.}},{{/subscripts}}) => 
                {
                    var args = new[] { {{#subscripts}}arg{{.}},{{/subscripts}} };
                    Binder.Shared.ConvertArguments(method, args);
                    return method.Invoke(null, args);
                };
            else if(method.IsConstructor)
                ret = ({{#subscripts}}arg{{.}},{{/subscripts}}) => 
                {
                    var ctor = method as ConstructorInfo;
                    var args = new[] { {{#subscripts}}arg{{.}},{{/subscripts}} };
                    Binder.Shared.ConvertArguments(ctor, args);
                    return ctor.Invoke(args);
                };
            else
                ret = (target{{#subscriptsPlusOne}}, arg{{.}}{{/subscriptsPlusOne}}) => 
                {
                    {{^subscriptsPlusOne}}
                    return method.Invoke(target, null);
                    {{/subscriptsPlusOne}}
                    {{#subscriptsPlusOne.Length}}
                    var args = new [] { {{#subscriptsPlusOne}}arg{{.}},{{/subscriptsPlusOne}} };
                    Binder.Shared.ConvertArguments(method, args);
                    return method.Invoke(target, args);
                    {{/subscriptsPlusOne.Length}}
                };
            return ret;
        }

    }
}